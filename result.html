<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>QG14 Card Clash</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{
      --gold:#FFD700;
      --green:#0b6e3f;
      --green-hover:#14824c;

      /* ğŸ”§ Set your fixed abilities panel height here */
      --ability-max-h: 180px; /* try 140px, 180px, etc. */
    }
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    html, body { scrollbar-width: none; }
    html::-webkit-scrollbar, body::-webkit-scrollbar { display: none; }

    /* Ø®Ù„ÙÙŠØ© Ø§Ù„ØµÙˆØ±Ø© Ù„ØµÙØ­Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© */
    body {
      background-image: url("images/Background.webp");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: fixed;
    }
    .btn-gold{
      background: var(--green);
      border: 3px solid var(--gold);
      color: var(--gold);
      font-weight: 800;
      border-radius: 14px;
      box-shadow: 0 2px 0 rgba(0,0,0,.3);
      transition: background .15s ease, transform .05s ease;
    }
    .btn-gold:hover{ background: var(--green-hover); }
    .btn-gold:active{ transform: translateY(1px); }
    .btn-ico{
      width: 52px; height: 52px;
      display: grid; place-items: center;
      border-radius: 9999px;
      padding: 0;
    }
    .btn-inc{ background: var(--green); }
    .btn-dec{ background:#991b1b; }
    .btn-dec:hover{ background:#b91c1c; }
    .chip-gold{
      background:#6d1a2e;
      border:3px solid var(--gold);
      color:var(--gold);
      font-weight:800;
      border-radius:9999px;
      min-width:100px;
      text-align:center;
      padding:10px 22px;
      line-height:1;
      box-shadow:0 2px 0 rgba(0,0,0,.3);
      font-size:1.4rem;
    }
    /* ğŸ”’ Fixed height abilities pane */
    .abilities-pane{
      max-height: var(--ability-max-h);
      overflow-y: auto; /* scrollable within fixed height */
    }

    /* ØªØ®ØµÙŠØµ Ø²Ø± ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¨Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø­Ø¯ ÙˆØ§Ù„ÙƒØªØ§Ø¨Ø© */
    .btn-confirm{
      border-color: #01E2AB !important;
      color: #01E2AB !important;
    }

    /* ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø§Ù„ØµÙØ±Ø§Ø¡ Ø¥Ù„Ù‰ Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ÙÙ‚Ø· Ù„Ù„Ø­Ø¯ÙˆØ¯ */
    .border-yellow-500,
    .border-yellow-600,
    .chip-gold {
      border-color: #01E2AB !important;
    }

    /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø³ÙƒÙˆØ±Ø¨ÙˆØ±Ø¯ (Ø£Ø³Ù‡Ù… + ØµÙ†Ø¯ÙˆÙ‚ Ø±Ù‚Ù…) Ø¨Ø´ÙƒÙ„ Ø£ØµØºØ± ÙˆØ¹Ù…ÙˆØ¯ÙŠ */
    .score-btn-up,
    .score-btn-down{
      width: 38px;
      height: 38px;
      border-radius: 9999px;
      border: 2px solid #01E2AB;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #047857; /* Ø£Ø®Ø¶Ø± Ø¯Ø§ÙƒÙ† Ù„Ù„Ø³Ù‡Ù… Ø§Ù„Ø¹Ù„ÙˆÙŠ Ø£Ø³Ø§Ø³Ù‹Ø§ */
      box-shadow: 0 0 8px rgba(0,0,0,0.45);
      cursor: pointer;
      transition: transform .08s ease, box-shadow .08s ease, opacity .12s ease;
    }
    .score-btn-down{
      background-color: #991b1b; /* Ø£Ø­Ù…Ø± Ø¯Ø§ÙƒÙ† Ù„Ù„Ø³Ù‡Ù… Ø§Ù„Ø³ÙÙ„ÙŠ */
    }
    .score-btn-up:hover,
    .score-btn-down:hover{
      transform: translateY(-1px);
      box-shadow: 0 0 12px rgba(0,0,0,0.6);
      opacity: 0.97;
    }
    .score-btn-up:active,
    .score-btn-down:active{
      transform: translateY(1px) scale(0.97);
      box-shadow: 0 0 4px rgba(0,0,0,0.5);
    }
    .score-box{
      min-width: 0;
      height: auto;
      border-radius: 0;
      border: none;
      background: transparent;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #01E2AB;
      font-weight: 900;
      font-size: 1.6rem;
      box-shadow: none;
    }
    .scoreboard-overlay{
      display: grid;
      grid-template-columns: 110px 1fr minmax(140px, auto) 1fr 110px;
      align-items: center;
      width: 100%;
      height: 100%;
      gap: 12px;
      padding: 0 18px;
    }
    @media (min-width: 768px){
      .scoreboard-overlay{
        grid-template-columns: 120px 1fr minmax(160px, auto) 1fr 120px;
        gap: 16px;
        padding: 0 32px;
      }
    }
    .score-name{
      color: var(--gold);
      font-weight: 900;
      font-size: 1.5rem;
      text-align: center;
      text-shadow: 0 2px 4px rgba(0,0,0,0.45);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 100%;
    }
    .score-flag{
      width: 74px;
      height: 74px;
      background: #7b2131;
      border: 4px solid #f5f5f5;
      border-radius: 12px;
      transform: rotate(45deg);
      display: grid;
      place-items: center;
      overflow: hidden;
      box-shadow: 0 6px 12px rgba(0,0,0,0.45);
    }
    @media (min-width: 768px){
      .score-flag{
        width: 86px;
        height: 86px;
      }
    }
    .score-flag img{
      width: 120%;
      height: 120%;
      object-fit: cover;
      transform: rotate(-45deg);
    }
    .note-box{
      width: 15rem;
      height: 8.5rem;
      background:#731733;
      border: 3px solid #c6c6c6;
      border-radius: 18px;
      box-shadow: 0 8px 18px rgba(0,0,0,0.45);
      color: #f7f7f7;
      resize: vertical;
    }
    @media (min-width: 768px){
      .note-box{ width: 17rem; height: 9.5rem; }
    }
    .note-box::placeholder{ color: rgba(255,255,255,0.65); }
    .ability-slot{
      width: 15rem;
      min-height: 5.5rem;
      border: 2px dashed rgba(255,215,0,0.6);
      border-radius: 14px;
      padding: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.2);
      box-shadow: inset 0 0 12px rgba(0,0,0,0.35);
    }
    @media (min-width: 768px){
      .ability-slot{ width: 17rem; }
    }
  </style>
</head>
<body class="bg-[#4B0E1F] text-white min-h-screen no-scrollbar">
  <div id="arena"
       class="w-full min-h-screen box-border flex flex-col items-center">
    <p id="roundTitle" class="text-3xl md:text-4xl font-extrabold text-[#01E2AB] mt-8 mb-3">Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø©</p>
    <!-- Ø³ÙƒÙˆØ±Ø¨ÙˆØ±Ø¯ ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù…Ø¹ Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù„ÙƒÙ„ Ù„Ø§Ø¹Ø¨ -->
    <div class="w-full flex justify-center mt-4 mb-4 relative">
      <img src="/images/Scoreboard.png" alt="Scoreboard" class="w-full max-w-5xl h-auto">
      <!-- Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ù†ØªÙŠØ¬Ø© (Ù„Ø§Ø¹Ø¨ ÙŠØ³Ø§Ø± Ùˆ Ù„Ø§Ø¹Ø¨ ÙŠÙ…ÙŠÙ†) ÙÙˆÙ‚ Ø§Ù„Ø³ÙƒÙˆØ±Ø¨ÙˆØ±Ø¯ -->
      <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
        <div class="flex items-center gap-24">
          <!-- Ù…Ø¬Ù…ÙˆØ¹Ø© Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø£ÙŠØ³Ø± -->
          <div class="flex flex-col items-center gap-4">
            <!-- Ø²Ø± Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© (ÙŠØ³Ø§Ø±) -->
            <button type="button"
                    onclick="changeScore('left', 1)"
                    class="score-btn-up pointer-events-auto"
                    aria-label="Ø²ÙŠØ§Ø¯Ø© Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø£ÙŠØ³Ø±">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="#01E2AB">
                <path d="M12 7l6 6H6l6-6z"/>
              </svg>
            </button>
            <!-- ØµÙ†Ø¯ÙˆÙ‚ Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø© (ÙŠØ³Ø§Ø±) -->
            <div id="scoreLeft"
                 class="score-box">
              0
            </div>
            <!-- Ø²Ø± Ø¥Ù†Ù‚Ø§Øµ Ø§Ù„Ù†ØªÙŠØ¬Ø© (ÙŠØ³Ø§Ø±) -->
            <button type="button"
                    onclick="changeScore('left', -1)"
                    class="score-btn-down pointer-events-auto"
                    aria-label="Ø¥Ù†Ù‚Ø§Øµ Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø£ÙŠØ³Ø±">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="#e11d48">
                <path d="M12 17l-6-6h12l-6 6z"/>
              </svg>
            </button>
          </div>

          <!-- Ù…Ø¬Ù…ÙˆØ¹Ø© Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø£ÙŠÙ…Ù† -->
          <div class="flex flex-col items-center gap-4">
            <!-- Ø²Ø± Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© (ÙŠÙ…ÙŠÙ†) -->
            <button type="button"
                    onclick="changeScore('right', 1)"
                    class="score-btn-up pointer-events-auto"
                    aria-label="Ø²ÙŠØ§Ø¯Ø© Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø£ÙŠÙ…Ù†">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="#01E2AB">
                <path d="M12 7l6 6H6l6-6z"/>
              </svg>
            </button>
            <!-- ØµÙ†Ø¯ÙˆÙ‚ Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø© (ÙŠÙ…ÙŠÙ†) -->
            <div id="scoreRight"
                 class="score-box">
              0
            </div>
            <!-- Ø²Ø± Ø¥Ù†Ù‚Ø§Øµ Ø§Ù„Ù†ØªÙŠØ¬Ø© (ÙŠÙ…ÙŠÙ†) -->
            <button type="button"
                    onclick="changeScore('right', -1)"
                    class="score-btn-down pointer-events-auto"
                    aria-label="Ø¥Ù†Ù‚Ø§Øµ Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø£ÙŠÙ…Ù†">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="#e11d48">
                <path d="M12 17l-6-6h12l-6 6z"/>
              </svg>
            </button>
          </div>
        </div>
      </div>
      <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
        <div class="relative w-full max-w-5xl h-full">
          <div class="scoreboard-overlay">
            <div class="flex justify-center">
              <div id="scoreFlagLeft" class="score-flag"></div>
            </div>
            <div class="flex justify-center">
              <div id="scoreNameLeft" class="score-name"></div>
            </div>
            <div class="flex items-center justify-center">
              <div class="w-[140px] md:w-[170px] h-px"></div>
            </div>
            <div class="flex justify-center">
              <div id="scoreNameRight" class="score-name"></div>
            </div>
            <div class="flex justify-center">
              <div id="scoreFlagRight" class="score-flag"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="w-full max-w-[1600px] px-6 md:px-10 pb-10">
      <div class="grid grid-cols-1 md:grid-cols-[1fr_auto_1fr] gap-6 items-start">
        <!-- LEFT column (player 2) -->
        <div>
          <h3 class="text-xl font-extrabold mb-2">Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¬ÙˆÙ„Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©</h3>
          <div id="prevLeftScroll" class="h-72 overflow-y-auto no-scrollbar pr-0 bg-black/20 rounded-2xl p-3">
            <div id="prevLeftGrid" class="grid grid-cols-3 gap-y-3 gap-x-1"></div>
          </div>
        </div>

        <!-- CENTER -->
        <div class="flex flex-col items-center mt-6 md:mt-10">
          <div id="vsRow" class="flex justify-center gap-10 flex-wrap"></div>
        </div>

        <!-- RIGHT column (player 1) -->
        <div>
          <h3 class="text-xl font-extrabold mb-2">Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¬ÙˆÙ„Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©</h3>
          <div id="prevRightScroll" class="h-72 overflow-y-auto no-scrollbar pr-0 bg-black/20 rounded-2xl p-3">
            <div id="prevRightGrid" class="grid grid-cols-3 gap-y-3 gap-x-1"></div>
          </div>
        </div>
      </div>

      <!-- Ø²Ø± ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙ‚Ø· Ø¨Ø¯ÙˆÙ† Ø¹Ø¯Ù‘Ø§Ø¯Ø§Øª Ù…Ù†ÙØµÙ„Ø© -->
      <div class="mt-10 flex justify-center">
        <button onclick="confirmWinner()" class="btn-gold btn-confirm px-10 py-3 text-xl">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù†ØªÙŠØ¬Ø©</button>
      </div>
    </div>
  </div>

  <img src="../images/qg14-Card-Clash-logo.png" alt="QG14 Logo"
       class="fixed top-4 right-4 w-40 h-auto opacity-90 pointer-events-none" />

  <!-- Abilities are image-based now; no transfer/add modals -->

  <script>
    // ØªØ­ÙƒÙ… Ø¨Ø³ÙŠØ· ÙÙŠ Ù†ØªÙŠØ¬ØªÙŠÙ† (Ù„Ø§Ø¹Ø¨ ÙŠØ³Ø§Ø± ÙˆÙ„Ø§Ø¹Ø¨ ÙŠÙ…ÙŠÙ†) Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙƒÙˆØ±Ø¨ÙˆØ±Ø¯
    let scoreLeft = 0;
    let scoreRight = 0;

    function changeScore(side, delta) {
      if (side === 'left') {
        scoreLeft = Math.max(0, scoreLeft + delta); // Ù„Ø§ ÙŠØ³Ù…Ø­ Ø¨Ø§Ù„Ù†Ø²ÙˆÙ„ Ø¹Ù† 0
        const elL = document.getElementById('scoreLeft');
        if (elL) elL.textContent = scoreLeft;
      } else if (side === 'right') {
        scoreRight = Math.max(0, scoreRight + delta);
        const elR = document.getElementById('scoreRight');
        if (elR) elR.textContent = scoreRight;
      }
    }
  </script>

  <script src="/socket.io/socket.io.js"></script>
  <script src="/js/webm-sfx.js"></script>
  <script src="result.js"></script>
  <script src="../copyright.js"></script>
  <script src="../security.js"></script>
</body>
</html>
